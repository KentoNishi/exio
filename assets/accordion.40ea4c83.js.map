{"version":3,"file":"accordion.40ea4c83.js","sources":["../../src/lib/src/accordion.ts"],"sourcesContent":["import { destroyer, styler, toMillis } from './base';\nimport type { ExioNode } from './base';\nimport { exioPointerEffect } from './effects';\nimport { exioComponent } from './component';\nimport { createExioFont } from './icon';\n\nexport function exioAccordion(node: HTMLDetailsElement): ExioNode {\n  const component = exioComponent(node);\n  createExioFont();\n  const summary = node.querySelector('summary');\n  const effect = exioPointerEffect(summary, {\n    borderStyle: 'reactive',\n  });\n  const s1 = styler(summary);\n  s1.innerHTML = `\n    .${s1.id} {\n      cursor: default;\n      user-select: none;\n      position: relative;\n    }\n    .${s1.id}::marker{\n      font-size: 0px;\n    }\n    .${s1.id}:after {\n      content: 'expand_more';\n      font-family: 'Exio Icons';\n      font-size: 1.5em;\n      position: absolute;\n      right: 0.25em;\n      transform: rotate(0deg);\n      transition: transform var(--exio-slow-transition-duration);\n    }\n  `;\n  const s2 = styler(node);\n  s2.innerHTML = `\n    .${s2.id} {\n      transition: max-height var(--exio-slow-transition-duration);\n      overflow: hidden;\n    }\n  `;\n  const child = node.querySelector('*:not(summary)') as HTMLElement;\n  const s3 = styler(node);\n  const s4 = styler(summary);\n  let timeout: ReturnType<typeof setTimeout> | undefined;\n  const summaryClickListener = (e) => {\n    if (timeout) clearTimeout(timeout);\n    const computed = getComputedStyle(summary);\n    const getT = () =>\n      toMillis(computed.getPropertyValue('--exio-slow-transition-duration'));\n    const fullHeight = () => summary.offsetHeight + child.offsetHeight;\n    if (node.open) {\n      e.preventDefault();\n      s3.innerHTML = `\n        .${s3.id} {\n          max-height: ${fullHeight()}px;\n        }\n      `;\n      setTimeout(() => {\n        s3.innerHTML = `\n        .${s3.id} {\n          max-height: ${summary.offsetHeight}px;\n        }\n      `;\n        s4.innerHTML = `\n        .${s4.id}:after {\n          transform: rotate(0deg);\n        }\n      `;\n        timeout = setTimeout(() => {\n          node.open = false;\n        }, getT());\n      }, 0);\n    } else {\n      s3.innerHTML = `\n        .${s3.id} {\n          max-height: ${summary.offsetHeight}px;\n        }\n      `;\n      s4.innerHTML = `\n        .${s4.id}:after {\n          transform: rotate(180deg);\n        }\n      `;\n      setTimeout(() => {\n        s3.innerHTML = `\n          .${s3.id} {\n            max-height: ${fullHeight()}px;\n          }\n        `;\n        timeout = setTimeout(() => {\n          s3.innerHTML = '';\n        }, getT());\n      }, 0);\n    }\n  };\n  summary.addEventListener('click', summaryClickListener);\n  return destroyer(() => {\n    effect.destroy();\n    s1.remove();\n    s2.remove();\n    s3.remove();\n    component.destroy();\n    summary.removeEventListener('click', summaryClickListener);\n  });\n}\n"],"names":[],"mappings":"iFAM8B,EAAoC,MAC1D,GAAY,EAAc,YAE1B,GAAU,EAAK,cAAc,WAC7B,EAAS,EAAkB,EAAS,CACxC,YAAa,aAET,EAAK,EAAO,KACf,UAAY;AAAA,OACV,EAAG;AAAA;AAAA;AAAA;AAAA;AAAA,OAKH,EAAG;AAAA;AAAA;AAAA,OAGH,EAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAUF,GAAK,EAAO,KACf,UAAY;AAAA,OACV,EAAG;AAAA;AAAA;AAAA;AAAA,SAKF,GAAQ,EAAK,cAAc,kBAC3B,EAAK,EAAO,GACZ,EAAK,EAAO,MACd,QACE,GAAuB,AAAC,GAAM,CAC9B,gBAAsB,QACpB,GAAW,iBAAiB,GAC5B,EAAO,IACX,EAAS,EAAS,iBAAiB,oCAC/B,EAAa,IAAM,EAAQ,aAAe,EAAM,aAClD,EAAK,QACL,mBACC,UAAY;AAAA,WACV,EAAG;AAAA,wBACU;AAAA;AAAA,mBAGP,IAAM,GACZ,UAAY;AAAA,WACZ,EAAG;AAAA,wBACU,EAAQ;AAAA;AAAA,UAGrB,UAAY;AAAA,WACZ,EAAG;AAAA;AAAA;AAAA,UAII,WAAW,IAAM,GACpB,KAAO,IACX,MACF,OAEA,UAAY;AAAA,WACV,EAAG;AAAA,wBACU,EAAQ;AAAA;AAAA,UAGvB,UAAY;AAAA,WACV,EAAG;AAAA;AAAA;AAAA,mBAIG,IAAM,GACZ,UAAY;AAAA,aACV,EAAG;AAAA,0BACU;AAAA;AAAA,YAGR,WAAW,IAAM,GACtB,UAAY,IACd,MACF,cAGC,iBAAiB,QAAS,GAC3B,EAAU,IAAM,GACd,YACJ,WACA,WACA,WACO,YACF,oBAAoB,QAAS"}